
<!DOCTYPE html>
<html>
<head>
  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Web API &mdash; Wallace</title>

    
      <link rel="shortcut icon" href="../img/favicon.ico">
    

    <link rel="stylesheet" href="../css/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../css/alabaster-overrides.css" type="text/css" />

    
      <link href="../css/style.css" rel="stylesheet">
    

    

    

    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

    
  
</head>
<body role="document">

  <div class="document">
    <div class="documentwrapper">
      <div class="bodywrapper">
        <div class="body" role="main">
          
            <p>The Wallace API allows the experiment frontend to communicate with the backend. Many of these routes correspond to specific functions of Wallace's <a href="../Classes/">classes</a>, particularly <code>Node</code>. For example, nodes have a <code>connect</code> method that creates new vectors between nodes and there is a corresponding <code>connect/</code> route that allows the frontend to call this method.</p>
<h2 id="miscellaneous-routes">Miscellaneous routes</h2>
<p><code>/ad_address/&lt;mode&gt;/&lt;hit_id&gt;</code> [GET] <br />
Used to get the address of the experiment on the psiTurk server and to return participants to MTurk upon completion of the experiment. This route is pinged automatically by the function <code>submit_assignment</code> in wallace.js.</p>
<p><code>/&lt;directory&gt;/&lt;page&gt;</code> [GET] <br />
Returns the html page with the name <code>&lt;page&gt;</code> from the directory called <code>&lt;directory&gt;</code>.</p>
<p><code>/summary</code> [GET] <br />
Returns a summary of the statuses of Participants.</p>
<p><code>/&lt;page&gt;</code> [GET] <br />
Returns the html page with the name <code>&lt;page&gt;</code>.</p>
<h2 id="experiment-routes">Experiment routes</h2>
<p><code>/experiment_property/&lt;property&gt;</code> [GET] <br />
Returns the value of the requested property as a JSON <code>&lt;property&gt;</code>.</p>
<p><code>/info/&lt;node_id&gt;/&lt;info_id&gt;</code> [GET] <br />
Returns a JSON description of the requested info as <code>info</code>. <code>node_id</code> must be specified to ensure the requesting node has access to the requested info. Calls experiment method `info_get_request(node, info).</p>
<p><code>/info/&lt;node_id&gt;</code> [POST] <br />
Create an info with its origin set to the specified node. <em>contents</em> must be passed as data. <code>info_type</code> can be passed as data and will cause the info to be of the specified type. Also calls experiment method <code>info_post_request(node, info)</code>.</p>
<p><code>/launch</code> [POST] <br />
Initializes the experiment and opens recruitment. This route is automatically pinged by Wallace.</p>
<p><code>/network/&lt;network_id&gt;</code> [GET] <br />
Returns a JSON description of the requested network as <code>network</code>.</p>
<p><code>/node/&lt;node_id&gt;/connect/&lt;other_node_id&gt;</code> [POST] <br />
Create vector(s) between the <code>node</code> and <code>other_node</code> by calling <code>node.connect(whom=other_node)</code>. Direction can be passed as data and will be forwarded as an argument. Calls experiment method <code>vector_post_request(node, vectors)</code>. Returns a list of JSON descriptions of the created vectors as <code>vectors</code>.</p>
<p><code>/node/&lt;node_id&gt;/infos</code> [GET] <br />
Returns a list of JSON descriptions of the infos created by the node as <code>infos</code>. Infos are identified by calling <code>node.infos()</code>. <code>info_type</code> can be passed as data and will be forwarded as an argument. Requesting node and the list of infos are also passed to experiment method <code>info_get_request(node, infos)</code>.</p>
<p><code>/node/&lt;node_id&gt;/neighbors</code> [GET] <br />
Returns a list of JSON descriptions of the node's neighbors as <code>nodes</code>. Neighbors are identified by calling <code>node.neighbors()</code>. <code>node_type</code> and <code>connection</code> can be passed as data and will be forwarded as arguments. Requesting node and list of neighbors are also passed to experiment method <code>node_get_request(node, nodes)</code>.</p>
<p><code>/node/&lt;node_id&gt;/received_infos</code> [GET] <br />
Returns a list of JSON descriptions of the infos sent to the node as <code>infos</code>. Infos are identified by calling <code>node.received_infos()</code>. <code>info_type</code> can be passed as data and will be forwarded as an argument. Requesting node and the list of infos are also passed to experiment method <code>info_get_request(node, infos)</code>.</p>
<p><code>/node/&lt;int:node_id&gt;/transformations</code> [GET] <br />
Returns a list of JSON descriptions of all the transformations of a node identified using <code>node.transformations()</code>. The node id must be specified in the url. You can also pass <code>transformation_type</code> as data and it will be forwarded to <code>node.transformations()</code> as the argument <code>type</code>.</p>
<p><code>/node/&lt;node_id&gt;/transmissions</code> [GET] <br />
Returns a list of JSON descriptions of the transmissions sent to/from the node as <code>transmissions</code>. Transmissions are identified by calling <code>node.transmissions()</code>. <code>direction</code> and <code>status</code> can be passed as data and will be forwarded as arguments. Requesting node and the list of transmissions are also passed to experiment method <code>transmission_get_request(node, transmissions)</code>.</p>
<p><code>/node/&lt;node_id&gt;/transmit</code> [POST] <br />
Transmit to another node by calling <code>node.transmit()</code>. The sender's node id must be specified in the url. As with <code>node.transmit()</code> the key parameters are <code>what</code> and <code>to_whom</code> and they should be passed as data. However, the values these accept are more limited than for the backend due to the necessity of serialization. <br />
If <code>what</code> and <code>to_whom</code> are not specified they will default to <code>None</code>.
Alternatively you can pass an int (e.g. '5') or a class name (e.g.
<code>Info</code> or <code>Agent</code>). Passing an int will get that info/node, passing
a class name will pass the class. Note that if the class you are specifying
is a custom class it will need to be added to the dictionary of
known_classes in your experiment code. <br />
You may also pass the values property1, property2, property3, property4
and property5. If passed this will fill in the relevant values of the
transmissions created with the values you specified. <br />
The transmitting node and a list of created transmissions are sent to experiment method <code>transmission_post_request(node, transmissions)</code>. This route returns a list of JSON descriptions of the created transmissions as <code>transmissions</code>.
For example, to transmit all infos of type Meme to the node with id 10:</p>
<pre><code>reqwest({
    url: &quot;/node/&quot; + my_node_id + &quot;/transmit&quot;,
    method: 'post',
    type: 'json',
    data: {
        what: &quot;Meme&quot;,
        to_whom: 10,
    },
});
</code></pre>

<p><code>/node/&lt;node_id&gt;/vectors</code> [GET] <br />
Returns a list of JSON descriptions of vectors connected to the node as <code>vectors</code>. Vectors are identified by calling <code>node.vectors()</code>. <code>direction</code> and <code>failed</code> can be passed as data and will be forwarded as arguments. Requesting node and list of vectors are also passed to experiment method <code>vector_get_request(node, vectors)</code>. </p>
<p><code>/node/&lt;participant_id&gt;</code> [POST] <br />
Create a node for the specified participant. The route calls the following experiment methods: <code>get_network_for_participant(participant)</code>, <code>create_node(network, participant)</code>, <code>add_node_to_network(node, network)</code>, and <code>node_post_request(participant, node)</code>. Returns a JSON description of the created node as <code>node</code>.</p>
<p><code>/notifications</code> [POST, GET] <br />
This is the route to which notifications from AWS are sent. It is also possible to send your own notifications to this route, thereby simulating notifications from AWS. Necessary arguments are <code>Event.1.EventType</code>, which can be <code>AssignmentAccepted</code>, <code>AssignmentAbandoned</code>, <code>AssignmentReturned</code> or <code>AssignmentSubmitted</code>, and <code>Event.1.AssignmentId</code>, which is the id of the relevant assignment. In addition, Wallace uses a custom event type of <code>NotificationMissing</code>.</p>
<p><code>/participant/&lt;participant_id&gt;</code> [GET] <br />
Returns a JSON description of the requested participant as <code>participant</code>.</p>
<p><code>/participant/&lt;worker_id&gt;/&lt;hit_id&gt;/&lt;assignment_id&gt;/&lt;mode&gt;</code> [POST] <br />
Create a participant. Returns a JSON description of the participant as <code>participant</code>.</p>
<p><code>/question/&lt;participant_id&gt;</code> [POST] <br />
Create a question. <code>question</code>, <code>response</code> and <code>question_id</code> should be passed as data. Does not return anything.</p>
<p><code>/transformation/&lt;int:node_id&gt;/&lt;int:info_in_id&gt;/&lt;int:info_out_id&gt;</code> [POST] 
Create a transformation from <code>info_in</code> to <code>info_out</code> at the specified node. <code>transformation_type</code> can be passed as data and the transformation will be of that class if it is a known class. Returns a JSON description of the created transformation.</p>
            
          
        </div>
      </div>
    </div>
    <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
      <div class="sphinxsidebarwrapper">
        
  <h1 class="logo"><a href="..">Wallace</a></h1>



        
          



<h3>Table Of Contents</h3>

<nav>
  
  
    <ul>
    
  </ul>
  
    <ul>
    
  </ul>
  

  
</nav>
          
  <h3>Related Topics</h3>
  <ul>
    
      <li>Previous: <a href="../Classes/" title="previous chapter">
        Classes
      </a></li>
    
    
      <li>Next: <a href="../Communicating-with-the-server/" title="next chapter">
        Communicating with the server
      </a></li>
    
  </ul>

        
        <div id="searchbox" style="display: none;" role="search">
  <h3>Quick search</h3>
  <form class="search" action="../search.html" method="get">
    <input name="q" type="text">
    <input value="Go" type="submit">
  </form>
  <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
  </p>
</div>
<script type="text/javascript">
  document.getElementById("searchbox").style.display = "block";
</script>
      </div>
    </div>
    <div class="clearer"></div>
  </div>

  
    <div class="footer">
      
      
        
        Powered by <a href="http://www.mkdocs.org">MkDocs 0.15.3</a>
        &amp; <a href="https://github.com/iamale/mkdocs-alabaster">Alabaster</a>
      
    </div>
  

  <!--
  MkDocs version      : 0.15.3
  Docs Build Date UTC : 2016-08-09 01:49:33.563862
  -->
</body>
</html>